<!DOCTYPE html>
<html>

<head>
	<title>Bootstrap 101 Template</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<base href="/matreshka/">
	<!-- Bootstrap -->
	<link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link href="../../css/tomorrow-night.css" rel="stylesheet" media="screen">
	<link href="../../css/style.css" rel="stylesheet" media="screen">
	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
      <script src="../../bootstrap/assets/js/html5shiv.js"></script>
      <script src="../../bootstrap/assets/js/respond.min.js"></script>
    <![endif]--></head>

<body>
	<a href="https://github.com/finom/matreshka"><img style="position: fixed; z-index: 10000; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button> <a class="navbar-brand" href="/matreshka/index.html">Matreshka</a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="docs/index.html">Introduction</a></li>
							<li><a href="docs/Matreshka.html">Matreshka</a></li>
							<li><a href="docs/Matreshka.Object.html">MK.Object</a></li>
							<li><a href="docs/Matreshka.Array.html">MK.Array</a></li>
						</ul>
					</li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="examples/index.html">Introduction</a></li>
							<li><a href="examples/Matreshka.html">Matreshka</a></li>
							<li><a href="examples/Matreshka.Object.html">MK.Object</a></li>
							<li><a href="examples/Matreshka.Array.html">MK.Array</a></li>
						</ul>
					</li>
					<li>
						<a href="plugins/index.html">Plugins</a>
					</li>
					<li>
						<a href="https://github.com/finom/matreshka/releases">Download</a>
					</li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
	</nav>		
	<div class="container spacer-top">
		<h1>Matreshka.Object Examples</h1>
		<script>window.runIt = [];</script>
		<h3 id="original-methods"><a href="examples/Matreshka.Object.html#original-methods"><code>.jset</code> and <code>.toJSON</code></a></h3>
		<p>Remember that Matreshka.Array instance has same methods as native Javascript Array. Some methods are changed for chain calling.</p>
		<div class="row">
			
			<div class="col-lg-5 mk-example mk-example-js">
				<pre class="prettyprint">
				<code>var     mkArray = new MK.Array(),
					result = mkArray
							.push( 1, 2, 3, 4, 5 )
							.shift()
							.unshift( 6, 7 )
							.splice( 1, 4 )
							.toString()
					;
				
				$( '.output' ).html( result );
				</code>
				</pre>
			</div>
			<div class="col-lg-5 mk-example mk-example-layout">
				<pre class="prettyprint lang-html escape-html">
					<div class="output"></div>
				</pre>				
			</div>
			<div class="col-lg-2 mk-example mk-example-result">
				<div class="output ex1"></div>
				<script>
					runIt.push( function() {
						var mkArray = new MK.Array(),
							result = mkArray
								.push( 1, 2, 3, 4, 5 )
								.shift()
								.unshift( 6, 7 )
								.splice( 1, 4 )
								.toString()
							;
						
						$( '.output.ex1' ).html( result );
					});
				</script>
			</div>
		</div>
		
		<h3 id="original-methods"><a href="examples/Matreshka.Object.html#original-methods">Events</a></h3>
		<p>Each method that modifies <code>Matreshka.Array</code> instance fires two events: method name (e.g. <code>.push</code> method fires <code>"push"</code> event) and <code>"modify"</code>. An event handler first argument contains two special properties: <code>arguments</code> and <code>returns</code>. First is an arguments pseudoarray that has been passed to the method. Second is result that returned by original Array method. Let's look at example.</p>
		<div class="row">
			
			<div class="col-lg-5 mk-example mk-example-js">
				<pre class="prettyprint">
						<code>var mkArray = new MK.Array();
						
						mkArray
							.on( 'modify', function( evtOpts ) {
								alert(
									'"modify" event is fired\nresult is: ' 
									+ evtOpts.returns + '\narguments: ' 
									+ ( [].slice.call( evtOpts.arguments ).toString() || 'none' )
									+ '\nfired by: .' + evtOpts.method + ' method'
								);

								$( '.output' ).html( this.join( ', ' ) );
							})
							.on( 'push', function( evtOpts ) {
								alert(
									'"push" event is fired\nresult is: ' 
									+ evtOpts.returns + ' (original Array.prototype push returns length)\narguments: ' 
									+ [].slice.call( evtOpts.arguments ) 
								);
							})
							.on( 'pop', function( evtOpts ) {
								alert(
									'"pop" event is fired\nresult is: ' 
									+ evtOpts.returns + ' (original Array.prototype.pop returns last array item)'
								);
							})
							.on( 'reverse', function( evtOpts ) {
								alert( '"reverse" event is fired' );
							})
							.on( 'sort', function( evtOpts ) {
								alert( '"sort" event is fired' );
							})
						;

						$( '.push-example' ).on( 'click', function() {
							mkArray.push( 1, 2, 3, 4, 5 );
						});
						$( '.pop-example' ).on( 'click', function() {
							mkArray.pop();
						});
						$( '.reverse-example' ).on( 'click', function() {
							mkArray.reverse();
						});
						$( '.sort-example' ).on( 'click', function() {
							mkArray.sort();
						});
						
						</code>
				</pre>
			</div>
			<div class="col-lg-5 mk-example mk-example-layout">
				<pre class="prettyprint lang-html escape-html">
					<div class="output"></div>
					<button class="btn btn-default push-example">
						.push( 1, 2, 3, 4, 5 );
					</button>
					<button class="btn btn-default pop-example">
						.pop();
					</button>
					<button class="btn btn-default reverse-example">
						.reverse();
					</button>
					<button class="btn btn-default sort-example">
						.sort();
					</button>
				</pre>				
			</div>
			<div class="col-lg-2 mk-example mk-example-result">
				<div class="output ex2"></div>
				<button class="btn btn-default push-example pull-left clearfix ex2"><code>.push( 1, 2, 3, 4, 5 );</code></button>
				<button class="btn btn-default pop-example pull-left clearfix ex2"><code>.pop();</code></button>
				<button class="btn btn-default reverse-example pull-left clearfix ex2"><code>.reverse();</code></button>
				<button class="btn btn-default sort-example pull-left clearfix ex2"><code>.sort();</code></button>
				
				<script>
					runIt.push( function() {
						var mkArray = new MK.Array();
						
						mkArray
							.on( 'modify', function( evtOpts ) {
								alert(
									'"modify" event is fired\nresult is: ' 
									+ evtOpts.returns + '\narguments: ' 
									+ ( [].slice.call( evtOpts.arguments ).toString() || 'none' )
									+ '\nfired by: .' + evtOpts.method + ' method'
								);

								$( '.output.ex2' ).html( this.join( ', ' ) );
							})
							.on( 'push', function( evtOpts ) {
								alert(
									'"push" event is fired\nresult is: ' 
									+ evtOpts.returns + ' (original Array.prototype push returns length)\narguments: ' 
									+ [].slice.call( evtOpts.arguments ) 
								);
							})
							.on( 'pop', function( evtOpts ) {
								alert(
									'"pop" event is fired\nresult is: ' 
									+ evtOpts.returns + ' (original Array.prototype.pop returns last array item)'
								);
							})
							.on( 'reverse', function( evtOpts ) {
								alert( '"reverse" event is fired' );
							})
							.on( 'sort', function( evtOpts ) {
								alert( '"sort" event is fired' );
							})
						;

						$( '.push-example.ex2' ).on( 'click', function() {
							mkArray.push( 1, 2, 3, 4, 5 );
						});
						$( '.pop-example.ex2' ).on( 'click', function() {
							mkArray.pop();
						});
						$( '.reverse-example.ex2' ).on( 'click', function() {
							mkArray.reverse();
						});
						$( '.sort-example.ex2' ).on( 'click', function() {
							mkArray.sort();
						});
					});
				</script>
			</div>
		</div>
		
	</div>
		<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="../../bootstrap/js/bootstrap.min.js"></script>
	<script src="../../js/prettify.js"></script>
	<script src="/js/matreshka.all.min.js"></script>
	<script>
		( function() {
			function escapeHTML( string ) {
				var pre = document.createElement( 'pre' ),
					text = document.createTextNode( string );
				pre.appendChild( text );
				return pre.innerHTML;
			};
			
			function removeExtraTabs( string ) {
				var lines = string.split( '\n' ),
					tabsLength,
					minTabsLength = Infinity,
					tabsReg;
					
				for( var i = 0; i < lines.length; i++ ) {
					if( lines[ i ].replace( /\s/g, '' ).length ) {
						tabsLength = lines[ i ].length - lines[ i ].replace( /\t*(.*)/, '$1' ).length;
						minTabsLength = Math.min( minTabsLength, tabsLength );
					}
				}
				minTabsLength = minTabsLength | 0;console.log( minTabsLength )
				tabsReg = new RegExp( new Array( minTabsLength + 1 ).join( '\t' ) );
				for( var i = 0; i < lines.length; i++ ) {
					lines[ i ] = lines[ i ].replace( tabsReg, '' );
				}
				
				return lines.join( '\n' );
			};
			
			window.onload = function() {
				var toEscape = document.querySelectorAll( '.escape-html' ),
					pre = document.getElementsByTagName( 'pre' ),
					code;
				for( var i = 0; i < toEscape.length; i++ ) {
					toEscape[ i ].innerHTML = escapeHTML( toEscape[ i ].innerHTML );
				}
				for( var i = 0; i < pre.length; i++ ) {
					pre[ i ].innerHTML = removeExtraTabs( pre[ i ].innerHTML );
					code = pre[ i ].getElementsByTagName( 'code' )[ 0 ];
					pre[ i ].innerHTML = pre[ i ].innerHTML.trim();
					if( code ) {
						code.innerHTML = code.innerHTML.trim();
					}
				}
				
				prettyPrint();
					
				/*$( 'code' ).each( function() {
					this.innerHTML = this.innerHTML.replace( /\n/g, '<br>' );
				});*/
				
				if( window.runIt ) {
					for( var i = 0; i < window.runIt.length; i++ ) {
						window.runIt[ i ]();
					}
				}
				
				
				
			};
		})();
	</script>
	
		<script>
		
	</script>
</body>

</html>